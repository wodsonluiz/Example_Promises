<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<title>Promises</title>
<body>
    <script>
        /*
        Single thread
        IO n√£o bloqueante
        Assicrono

        Promises: Interface que o javascript disponibliza para o gerenciamento e controle da parte assicrono
        da linguagem.

        States da promises
        Pendente
        Realizada
        Rejeitada
        Estabelecida
        */

        /*
        console.log('primeiro');

        setTimeout(function(){
            console.log('segundo');
        }, 0);

        console.log('terceiro');
        */

        function jaRealizada(){
            return Promise.resolve('08340146')
        }

        function jaRejeitada(){
            return Promise.reject();
        }

       

        function promiseTrabalhada(){
            return new Promise(function(resolve, reject){
                setTimeout(function(){
                    resolve("Hello Word")
                },1000);
            })
        }

        promiseTrabalhada().then(function(message){
            console.log(message);
        })

        //https://viacep.com.br/ws/08340146/json/

        jaRealizada().then(function(cep){
            return window
                .fetch('https://viacep.com.br/ws/'+cep+'/json/')
           .then(function(data){
                return data.json();
           })
           .then(function(endereco){
               console.log(endereco);
           })
           .then(function(){
               return jaRejeitada()
           })
           .catch(function(){
               console.log('Aconteceu algum BO');
           })

        })

        
        
    </script>
</body>
</html>